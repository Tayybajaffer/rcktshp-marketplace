jQuery(document).ready(function(e){function t(){if(e(this).val()){var t={action:"app-render-project-form",category:e(this).val(),listing_id:e("input[name=ID]").val()};e.post(hrb_i18n.ajaxurl,t,function(t){e("#project-form-custom-fields").html(t),e(".file-upload .upload_button").on("click",function(){e(".file-upload-error").remove()}),e(document).foundation("forms")})}}e("#create-project-form").validate({errorElement:"small",errorPlacement:function(t,o){o.hasClass("category-dropdown")?e("div.custom.dropdown.category-dropdown").after(t):o.is(":radio")||o.is(":checkbox")?t.insertAfter(o.parent().siblings().last()):o.after(t)},rules:{budget_price:{required:!0,number:!0}}}),e(".locked").attr("disabled","disabled"),e("#create-project-form").submit(function(t){if(e(".file-upload.required .no-media").is(":visible")){var o=hrb_i18n.file_upload_required;e(".file-upload-error").remove(),e(".file-upload.required .media_placeholder").after('<a class="file-upload-error" href="#"></a><span class="file-upload-error error">'+o+"</span>"),e(".file-upload-error").show(),e("html,body").animate({scrollTop:e("a.file-upload-error").offset().top-100}),t.preventDefault()}}),e("#category, #sub_category").change(t).find("option").eq(0).val(""),e("#budget_type").change(function(){"hourly"==e(this).val()?e(".budget-min-hours").fadeIn():e(".budget-min-hours").fadeOut()}),e("#budget_currency").change(function(){var t=e("option:selected",this).attr("currency-symbol");e(".selected-currency").html(t)}),e("#budget_type").trigger("change"),e("#budget_currency").trigger("change");var o=0;e("#category").change(function(){if(0!=e(this).val()?e("#sub_category").removeAttr("disabled"):e("#sub_category").attr("disabled","disabled"),o==e(this).val())return!0;e("label[for=sub_category]").append(hrb_i18n.ajaxloader);var t={action:"hrb_output_subcategories",selected:e("#sub_category").attr("pre-selected"),category:e(this).val(),_ajax_nonce:hrb_i18n.ajax_nonce};e.ajax({url:hrb_i18n.ajaxurl,data:t,type:"POST"}).done(function(t){e("#sub_category").html(t).trigger("change"),e(".processing").hide(),Foundation.libs.forms.refresh_custom_select(e("#sub_category"),!0)}),o=e("#category option:selected").val()}),e("#category").trigger("change"),e("#skills").select2({maximumSelectionSize:app_project_edit_i18n.maximum_skills_selection,placeholder:app_project_edit_i18n.skills_placeholder}),e("#skills").on("select2-open",function(){e(".select2-results li").each(function(){var t=e(this).attr("class"),o=t.match(/level-[0-99]/g);o&&(level_n=o[0].split("-"),e(".select2-result-label",this).css("padding-left",20*level_n[1]+"px"))})}),e("#tags").tagsManager({prefilled:e("#tags").val(),tagsContainer:".tags-tags"}),e("body").on("keydown","input#tags",function(t){9==t.which&&(t.preventDefault(),e("input[tabindex=12]").focus())}),e("#location_type").change(function(){if("local"!=e(this).val())e(".custom-location").hide(),e(".custom-location input").val("");else{e(".custom-location").fadeIn();var t={details:"form",detailsAttribute:"data-geo"};if("undefined"!=typeof app_project_edit_i18n.geocomplete_options){t=e.extend(t,app_project_edit_i18n.geocomplete_options),e("#location").geocomplete(t);var o=e("#location").geocomplete("autocomplete");"undefined"!=typeof app_project_edit_i18n.geocomplete_options.componentRestrictions&&o.setComponentRestrictions(app_project_edit_i18n.geocomplete_options.componentRestrictions),"undefined"!=typeof app_project_edit_i18n.geocomplete_options.types&&o.setTypes(app_project_edit_i18n.geocomplete_options.types)}}}),e("#location_type").trigger("change")});